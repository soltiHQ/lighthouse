package spec

import (
	"github.com/soltiHQ/control-plane/internal/uikit/policy"
	"github.com/soltiHQ/control-plane/internal/uikit/routepath"
	"github.com/soltiHQ/control-plane/internal/uikit/trigger"
	"github.com/soltiHQ/control-plane/ui/templates/asset"
	"github.com/soltiHQ/control-plane/ui/templates/component/button"
	"github.com/soltiHQ/control-plane/ui/templates/layout"
)

// Specs renders the spec list page with HTMX auto-refresh.
templ Specs(nav policy.Nav) {
	@layout.ListPage("Specs", "tasks", nav) {
		@layout.ListHeader("Spec management") {
			if nav.CanAddSpec {
				<a href={ templ.SafeURL(routepath.PageSpecNew) }>
					@button.Button("Add", "button", false, button.VariantPrimary, false, templ.Attributes{}) {
						@asset.Icon("add")
					}
				</a>
			}
		}

		@layout.HTMXLoader("taskspecs-list", routepath.ApiSpecs, "load, "+trigger.SpecsRefresh, "Loading...")
	}
}
